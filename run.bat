@echo off
chcp 65001 > nul
REM ====================================================================
REM Coupang Wing CS ìë™í™” ì‹œìŠ¤í…œ - ì„œë²„ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ (Windows)
REM ====================================================================

echo.
echo ====================================================================
echo ğŸš€ Coupang Wing CS ìë™í™” ì‹œìŠ¤í…œ ì‹œì‘
echo ====================================================================
echo.

REM ====================================================================
REM 1. Python í™•ì¸
REM ====================================================================
python --version > nul 2>&1
if %errorLevel% neq 0 (
    echo âŒ Pythonì´ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.
    echo    ì„¤ì¹˜ í›„ ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”: install.bat
    pause
    exit /b 1
)

REM ====================================================================
REM 2. ê°€ìƒí™˜ê²½ í™œì„±í™” (ìˆëŠ” ê²½ìš°)
REM ====================================================================
if exist "backend\venv\Scripts\activate.bat" (
    echo ğŸ”§ ê°€ìƒí™˜ê²½ í™œì„±í™” ì¤‘...
    call backend\venv\Scripts\activate.bat
)

REM ====================================================================
REM 3. í™˜ê²½ ë³€ìˆ˜ íŒŒì¼ í™•ì¸
REM ====================================================================
if not exist "backend\.env" (
    echo âš ï¸  backend\.env íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.
    echo.
    echo ğŸ’¡ ë¨¼ì € ì„¤ì¹˜ë¥¼ ì™„ë£Œí•˜ì„¸ìš”:
    echo    install.bat
    echo.
    pause
    exit /b 1
)

REM ====================================================================
REM 4. í•„ìˆ˜ í´ë” í™•ì¸ ë° ìƒì„±
REM ====================================================================
if not exist "logs" mkdir logs
if not exist "data" mkdir data
if not exist "error_reports" mkdir error_reports
if not exist "backend\logs" mkdir backend\logs

REM ====================================================================
REM 5. ì„œë²„ ì‹œì‘
REM ====================================================================
echo.
echo ğŸŒŸ ì„œë²„ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...
echo.
echo ì„œë²„ ì •ë³´:
echo   - ì£¼ì†Œ: http://localhost:8080
echo   - API ë¬¸ì„œ: http://localhost:8080/docs
echo   - ì¤‘ë‹¨: Ctrl+C
echo.
echo ====================================================================
echo.

cd backend
python -m uvicorn app.main:app --host 0.0.0.0 --port 8080 --reload

REM ì„œë²„ ì¢…ë£Œ ì‹œ ë©”ì‹œì§€
echo.
echo ====================================================================
echo â¹ï¸  ì„œë²„ê°€ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.
echo ====================================================================
echo.

pause
