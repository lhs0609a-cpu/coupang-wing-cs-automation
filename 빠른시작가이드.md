# 쿠팡윙 CS 자동화 - 빠른 시작 가이드

## 📌 5분 안에 시작하기

### 1단계: 환경 변수 설정 (2분)

```bash
# backend 폴더로 이동
cd backend

# .env.example을 .env로 복사
copy .env.example .env    # Windows
# 또는
cp .env.example .env      # Mac/Linux
```

`.env` 파일을 열고 다음 정보만 입력:

```env
# 필수 정보
COUPANG_WING_USERNAME=your_username@email.com
COUPANG_WING_PASSWORD=your_password
OPENAI_API_KEY=sk-your-openai-api-key-here
```

### 2단계: 서버 시작 (1분)

```bash
# 프로젝트 폴더로 돌아가기
cd ..

# START.bat 더블클릭!
```

서버가 자동으로 시작되고 브라우저가 열립니다.

### 3단계: 로그인 테스트 (1분)

브라우저에서 열린 대시보드에서:

1. "로그인 테스트" 버튼 클릭
2. 성공 메시지 확인

또는 터미널에서:

```bash
curl -X POST "http://localhost:8000/api/wing-web/test-login" \
  -H "Content-Type: application/json" \
  -d '{"headless": false}'
```

### 4단계: 자동 응답 실행 (1분)

대시보드에서:

1. "자동 응답 시작" 버튼 클릭
2. 진행 상황 확인
3. 완료 통계 확인

---

## 🎯 실제 사용 시나리오

### 시나리오 1: 수동 실행

1. `START.bat` 실행
2. 브라우저에서 대시보드 열림
3. "자동 응답 시작" 클릭
4. 결과 확인

### 시나리오 2: API로 자동화

```python
import requests
import time

BASE_URL = "http://localhost:8000"

# 1. 서버 상태 확인
status = requests.get(f"{BASE_URL}/health")
print(f"서버 상태: {status.json()}")

# 2. 자동 응답 실행
response = requests.post(
    f"{BASE_URL}/api/wing-web/auto-answer",
    json={"headless": True}
)

result = response.json()
print(f"처리 완료: {result['statistics']}")
```

### 시나리오 3: 스케줄러 사용 (자동 실행)

```python
# backend/app/scheduler.py에 이미 구현되어 있음
# AUTO_START_SCHEDULER=True로 설정하면 서버 시작 시 자동 실행

# 기본 설정:
# - 매 5분마다 자동 체크
# - 새 문의 발견 시 자동 응답
```

---

## 🔍 주요 기능 테스트

### 1. 로그인 테스트 (headless=false로 브라우저 보면서)

```bash
curl -X POST "http://localhost:8000/api/wing-web/test-login" \
  -H "Content-Type: application/json" \
  -d '{
    "headless": false
  }'
```

### 2. 전체 자동화 실행 (백그라운드)

```bash
curl -X POST "http://localhost:8000/api/wing-web/auto-answer" \
  -H "Content-Type: application/json" \
  -d '{
    "headless": true
  }'
```

### 3. 서비스 상태 확인

```bash
curl http://localhost:8000/api/wing-web/status
```

---

## 📊 대시보드 기능

서버 시작 후 `http://localhost:3000`에서:

1. **실시간 통계**
   - 처리된 문의 수
   - 성공/실패 비율
   - 평균 응답 시간

2. **수동 제어**
   - 자동 응답 시작/중지
   - 로그인 테스트
   - 설정 변경

3. **로그 뷰어**
   - 실시간 로그 확인
   - 오류 추적

---

## ⚠️ 주의사항

### 필수 요구사항

- ✅ Python 3.8 이상
- ✅ Chrome 브라우저
- ✅ Node.js (프론트엔드용)
- ✅ 쿠팡윙 계정
- ✅ OpenAI API 키

### 보안

- `.env` 파일은 절대 공유하지 마세요
- Git에 커밋하지 마세요 (이미 .gitignore에 포함)
- API 키는 주기적으로 변경하세요

### 성능

- `headless=true`로 실행하면 더 빠름
- 동시에 여러 프로세스 실행 금지
- 쿠팡 서버 부하 고려 (너무 빠른 요청 피하기)

---

## 🐛 문제 해결

### 로그인 실패

```bash
# 1. 브라우저 모드로 실행하여 확인
curl -X POST "http://localhost:8000/api/wing-web/test-login" \
  -d '{"headless": false}'

# 2. 스크린샷 확인
# login_failed.png 파일 생성됨

# 3. .env 파일 재확인
```

### 문의를 찾지 못함

```bash
# debug_page.html 파일 자동 생성됨
# 파일 열어서 HTML 구조 확인
# 필요시 CSS 셀렉터 수정
```

### OpenAI API 오류

```bash
# API 키 확인
echo $OPENAI_API_KEY

# API 사용량 확인
# https://platform.openai.com/usage

# 모델 변경 시도
# OPENAI_MODEL=gpt-3.5-turbo
```

---

## 📚 추가 문서

- `기능설명서.md` - 전체 기능 상세 설명
- `README.md` - 프로젝트 개요
- `backend/.env.example` - 환경 변수 템플릿

---

## 🎉 완료!

이제 자동화 시스템을 사용할 준비가 되었습니다!

**다음 단계:**
1. `START.bat` 실행
2. 로그인 테스트
3. 자동 응답 시작
4. 결과 확인

**문의사항:** 로그 파일 확인 (`backend/logs/app.log`)
