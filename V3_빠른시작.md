# 쿠팡 윙 CS 자동화 V3 - 빠른 시작 가이드

## 🚀 3분 안에 시작하기

### 1단계: 환경 변수 설정 (1분)

`.env` 파일을 열고 다음 정보를 입력하세요:

```env
# 쿠팡 윙 로그인 정보
COUPANG_WING_USERNAME=your_username_here
COUPANG_WING_PASSWORD=your_password_here

# OpenAI API 키 (필수)
OPENAI_API_KEY=sk-proj-your_api_key_here
OPENAI_MODEL=gpt-4
```

### 2단계: 서버 실행 (1분)

```bash
# 서버가 아직 실행 중이 아니라면:
python start_servers.py
```

서버가 시작되면:
- 백엔드: http://localhost:8000
- 프론트엔드: http://localhost:3000

### 3단계: 자동화 실행 (1분)

#### 방법 A: Python 스크립트 (권장)

```bash
python test_wing_automation_v3.py
```

프롬프트가 나타나면:
1. 브라우저 화면 표시 선택: `1` (화면 보임)
2. 최대 반복 횟수: Enter (기본값 100)
3. Enter 키를 눌러 시작

#### 방법 B: API 호출

```bash
curl -X POST "http://localhost:8000/api/wing-web/auto-answer-v3" \
  -H "Content-Type: application/json" \
  -d '{"headless": false}'
```

#### 방법 C: Swagger UI

1. 브라우저에서 http://localhost:8000/docs 접속
2. `POST /api/wing-web/auto-answer-v3` 찾기
3. "Try it out" 클릭
4. Request body:
   ```json
   {
     "headless": false
   }
   ```
5. "Execute" 클릭

---

## ✨ V3의 특징

### 자동으로 처리되는 것들:

✅ **로그인**: 자동으로 쿠팡 윙에 로그인
✅ **탭 순회**: 72시간~30일 → 24~72시간 → 24시간 이내 순서로 자동 순회
✅ **미답변 찾기**: `replying-no-comments` 클래스로 미답변만 정확히 식별
✅ **답변 생성**: ChatGPT가 각 문의에 맞는 전문적인 답변 생성
✅ **답변 제출**: 자동으로 답변 입력 → 저장
✅ **반복**: 모든 탭에 미답변이 없을 때까지 자동 반복
✅ **통계**: 실시간 진행률 및 최종 통계 제공

### 당신이 해야 할 일:

1. `.env` 파일 설정
2. `python test_wing_automation_v3.py` 실행
3. 끝! (커피 한 잔 하시며 기다리세요 ☕)

---

## 📊 실행 화면 예시

```
======================================================================
  🚀 쿠팡 윙 CS 자동화 V3 시작
======================================================================
📌 모든 탭에서 미답변이 없을 때까지 반복 (최대 100회)
======================================================================

✅ 웹드라이버 설정 완료
🔐 쿠팡윙 로그인 시작...
  ✅ 아이디 입력 완료
  ✅ 비밀번호 입력 완료
  ✅ 로그인 버튼 클릭 완료
✅ 로그인 성공!
📋 고객문의 페이지로 이동...
✅ 고객문의 페이지 이동 완료

======================================================================
🔄 라운드 1 시작
======================================================================

────────────────────────────────────────────────────────────────
📂 [72시간~30일 이내] 탭 처리 중...
────────────────────────────────────────────────────────────────
  ✅ '72시간~30일 이내' 탭 클릭 완료
    📥 미답변 문의 수집 중...
    📊 총 3개 미답변 셀 발견
      ✅ 문의 1: 상품 A...
      ✅ 문의 2: 상품 B...
      ✅ 문의 3: 상품 C...
    ✅ 총 3개 미답변 문의 수집 완료

  📝 문의 1/3 처리 중...
    상품: 상품 A
    문의: 배송 언제 되나요?
    💬 답변 작성: 상품 A...
      🤖 ChatGPT 답변 생성 중...
      ✅ ChatGPT 답변 생성 완료 (180자)
      ✍️  답변 입력 중...
      ✅ 답변 입력 완료 (180자)
      🖱️  저장하기 버튼 클릭...
    ✅ 답변 저장 완료!

  ... (문의 2, 3 처리)

✅ [72시간~30일 이내] 탭 처리 완료! (처리: 3개)

────────────────────────────────────────────────────────────────
📂 [24~72시간] 탭 처리 중...
────────────────────────────────────────────────────────────────
  ℹ️  [24~72시간] 탭에 미답변 문의 없음

────────────────────────────────────────────────────────────────
📂 [24시간 이내] 탭 처리 중...
────────────────────────────────────────────────────────────────
  ℹ️  [24시간 이내] 탭에 미답변 문의 없음

======================================================================
📊 라운드 1 완료
  - 이번 라운드 처리: 3개
  - 누적 답변 완료: 3개
  - 누적 실패: 0개
======================================================================

⏳ 3초 후 다음 라운드 시작...
🔄 페이지 새로고침...

======================================================================
🔄 라운드 2 시작
======================================================================

... (모든 탭 확인)

🎉 모든 탭에 미답변 문의가 없습니다!
✅ 자동화 작업 완료!

======================================================================
📊 최종 처리 통계
======================================================================
  총 라운드: 2
  총 문의 수: 3
  답변 완료: 3
  답변 실패: 0
  건너뜀: 0
  성공률: 100.0%
======================================================================
```

---

## ⚠️ 문제 해결

### "COUPANG_WING_USERNAME이 설정되지 않았습니다"
→ `.env` 파일에 로그인 정보 추가

### "로그인 실패"
→ 아이디/비밀번호 확인, 쿠팡 윙에서 직접 로그인 테스트

### "ChatGPT 답변 생성 오류"
→ OpenAI API 키 확인, 요금 한도 확인

### "WebDriver 설정 실패"
→ Chrome 브라우저 설치 확인

---

## 📚 더 알아보기

- **상세 가이드**: `V3_사용가이드.md` 참고
- **API 문서**: http://localhost:8000/docs
- **로그 확인**: `logs/app.log`
- **오류 스크린샷**: `error_*.png` 파일들

---

## 🎯 핵심 요약

### V3는 다음을 자동으로 처리합니다:

1. **로그인** ✅
2. **모든 탭 순회** ✅ (72시간~30일 → 24~72시간 → 24시간 이내)
3. **미답변 찾기** ✅ (정확한 HTML 매칭)
4. **답변 생성** ✅ (ChatGPT)
5. **답변 제출** ✅
6. **반복** ✅ (미답변이 없을 때까지)

### 당신이 해야 할 일:

1. `.env` 설정 ⚙️
2. 실행 🚀
3. 결과 확인 📊

---

**시작하기**: `python test_wing_automation_v3.py`

**문의**: 로그 파일 및 스크린샷 확인

---

마지막 업데이트: 2025-01-15
