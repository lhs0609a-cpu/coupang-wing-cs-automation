# β… μλ™ κ³„μ • λ΅λ“ κΈ°λ¥ - μ™„λ£!

## π‰ κµ¬ν„ μ™„λ£!

μ΄μ  **λ°ν’ κ΄€λ¦¬**μ—μ„ κ³„μ •μ„ ν• λ²λ§ λ“±λ΅ν•λ©΄, λ‹¤μμ— νμ΄μ§€λ¥Ό μ—΄ λ• **μλ™μΌλ΅ μ €μ¥λ λ°μ΄ν„°κ°€ λ¶λ¬μ™€μ§‘λ‹λ‹¤**!

---

## π“‹ μ‚¬μ© λ°©λ²•

### 1λ‹¨κ³„: κ³„μ • μ„ΈνΈ λ“±λ΅ (μµμ΄ 1νλ§)

1. **λ°ν’ κ΄€λ¦¬** νμ΄μ§€ μ ‘μ†
2. **κ³„μ • μ„¤μ •** λ²„νΌ ν΄λ¦­
3. **μ„ΈνΈ μ΄λ¦„ μ…λ ¥**: μ) "κΈ°λ³Έ κ³„μ •"
4. **μΏ ν΅ κ³„μ • μ •λ³΄ μ…λ ¥**:
   - Access Key: `A00492891`
   - Secret Key: `534fcf1c...`
   - Vendor ID: `A00492891`
   - Wing μ•„μ΄λ””: `lhs0609` (μ„ νƒ)
   - Wing λΉ„λ°€λ²νΈ: (μ„ νƒ)
5. **λ„¤μ΄λ²„ κ³„μ • μ •λ³΄ μ…λ ¥**:
   - μ•„μ΄λ””: `your_naver_id`
   - λΉ„λ°€λ²νΈ: `your_password`
6. **"μ €μ¥ν•κ³  κ³„μ†"** ν΄λ¦­

β†’ κ³„μ •μ΄ λ°μ΄ν„°λ² μ΄μ¤μ— μκµ¬ μ €μ¥λ©λ‹λ‹¤!

---

### 2λ‹¨κ³„: μλ™ λ΅λ“ ν™•μΈ

λ‹¤μλ²μ— νμ΄μ§€λ¥Ό μ—΄λ©΄:

1. β… **νμ΄μ§€ λ΅λ“ μ‹ μλ™μΌλ΅ κ³„μ • μ •λ³΄κ°€ λ¶λ¬μ™€μ§‘λ‹λ‹¤**
2. β… **κ³„μ • μ„¤μ • λ¨λ‹¬μ„ μ—΄λ©΄ λ¨λ“  ν•„λ“κ°€ μ±„μ›μ Έ μμµλ‹λ‹¤**
3. β… **μΏ ν΅μ—μ„ μ΅°ν, λ„¤μ΄λ²„ μ²λ¦¬ λ“±μ΄ λ°”λ΅ κ°€λ¥ν•©λ‹λ‹¤**

β†’ **λ” μ΄μƒ λ§¤λ² μ…λ ¥ν•  ν•„μ” μ—†μ!**

---

## π”§ κΈ°μ μ  κµ¬ν„ λ‚΄μ©

### ν”„λ΅ νΈμ—”λ“ (`ReturnManagement.jsx`)

#### 1. μλ™ λ΅λ“ ν•¨μ μ¶”κ°€
```javascript
// κΈ°λ³Έ κ³„μ • μ„ΈνΈ μλ™ λ΅λ“ (νμ΄μ§€ λ΅λ“ μ‹ μλ™μΌλ΅ κ³„μ • μ •λ³΄ μ±„μ°κΈ°)
const loadDefaultAccountSet = async () => {
  try {
    const response = await axios.get(`${apiBaseUrl}/account-sets/default`)
    if (response.data.success && response.data.data) {
      const set = response.data.data

      // μΏ ν΅ + λ„¤μ΄λ²„ μ •λ³΄ λ¨λ‘ μλ™ μ…λ ¥
      setCredentials({
        coupangAccessKey: set.coupang_account?.access_key || '',
        coupangSecretKey: set.coupang_account?.secret_key || '',
        coupangVendorId: set.coupang_account?.vendor_id || '',
        coupangUsername: set.coupang_account?.wing_username || '',
        coupangPassword: set.coupang_account?.wing_password || '',
        naverUsername: set.naver_account?.naver_username || '',
        naverPassword: set.naver_account?.naver_password || '',
        saveCredentials: false
      })

      // savedCoupangAccountμ™€ savedNaverAccountλ„ μ—…λ°μ΄νΈ
      if (set.coupang_account) {
        setSavedCoupangAccount(set.coupang_account)
      }
      if (set.naver_account) {
        setSavedNaverAccount({
          id: set.naver_account.id,
          name: set.naver_account.name,
          username: set.naver_account.naver_username,
          password: set.naver_account.naver_password
        })
      }

      console.log(`β… κΈ°λ³Έ κ³„μ • μ„ΈνΈ μλ™ λ΅λ“ μ™„λ£: ${set.name}`)
    }
  } catch (error) {
    console.log('β„ΉοΈ κΈ°λ³Έ κ³„μ • μ„ΈνΈ μ—†μ')
  }
}
```

#### 2. μ»΄ν¬λ„νΈ λ§μ΄νΈ μ‹ μλ™ μ‹¤ν–‰
```javascript
// μ΄κΈ° λ΅λ“: κ³„μ • μ •λ³΄λ§ λ΅λ“ (ν• λ²λ§ μ‹¤ν–‰)
useEffect(() => {
  loadSavedAccounts()
  loadAccountSets()
  loadDefaultAccountSet() // β† μλ™ λ΅λ“!
}, []) // λΉ λ°°μ—΄ = μ»΄ν¬λ„νΈ λ§μ΄νΈ μ‹ ν• λ²λ§ μ‹¤ν–‰
```

#### 3. μ €μ¥ ν›„ μλ™ μ¬λ΅λ“
```javascript
const handleSaveAsAccountSet = async () => {
  // ... μ €μ¥ λ΅μ§ ...

  if (response.data.success) {
    // μ €μ¥ν• μ„ΈνΈλ¥Ό λ°”λ΅ κΈ°λ³Έ μ„ΈνΈλ΅ λ¶λ¬μ¤κΈ°
    await loadDefaultAccountSet()

    console.log('β… κ³„μ • μ„ΈνΈ μ €μ¥ μ™„λ£ λ° μλ™ λ΅λ“ μ™„λ£')
  }
}
```

### λ°±μ—”λ“ (`account_sets.py`)

#### GET `/api/account-sets/default`
```python
@router.get("/default")
async def get_default_account_set(db: Session = Depends(get_db)):
    """
    κΈ°λ³Έ κ³„μ • μ„ΈνΈ μ΅°ν
    """
    account_set = db.query(AccountSet).filter(
        AccountSet.is_default == True,
        AccountSet.is_active == True
    ).first()

    if not account_set:
        # κΈ°λ³Έ μ„ΈνΈκ°€ μ—†μΌλ©΄ μ²« λ²μ§Έ ν™μ„± μ„ΈνΈ λ°ν™
        account_set = db.query(AccountSet).filter(
            AccountSet.is_active == True
        ).first()

    if not account_set:
        return {"success": False, "data": None}

    return {
        "success": True,
        "data": account_set.to_dict(include_account_details=True)
    }
```

---

## β… μ‘λ™ νλ¦„

1. **νμ΄μ§€ λ΅λ“**
   - `useEffect(() => { loadDefaultAccountSet() }, [])` μ‹¤ν–‰
   - `/api/account-sets/default` νΈμ¶
   - κΈ°λ³Έ κ³„μ • μ„ΈνΈ μ΅°ν

2. **κ³„μ • μ„ΈνΈ λ°κ²¬**
   - μΏ ν΅ κ³„μ • μ •λ³΄ μλ™ μ…λ ¥
   - λ„¤μ΄λ²„ κ³„μ • μ •λ³΄ μλ™ μ…λ ¥
   - `savedCoupangAccount`, `savedNaverAccount` μ—…λ°μ΄νΈ

3. **μ‚¬μ© κ°€λ¥**
   - "μΏ ν΅μ—μ„ μ΅°ν" ν΄λ¦­ β†’ λ°”λ΅ λ™μ‘ (κ³„μ • μμ)
   - "λ„¤μ΄λ²„ μλ™μ²λ¦¬" ν΄λ¦­ β†’ λ°”λ΅ λ™μ‘ (κ³„μ • μμ)
   - "κ³„μ • μ„¤μ •" μ—΄κΈ° β†’ λ¨λ“  ν•„λ“ μ΄λ―Έ μ±„μ›μ§

---

## π” λ³΄μ•

- λ¨λ“  λΉ„λ°€λ²νΈμ™€ ν‚¤λ” **Fernet μ•”νΈν™”**λμ–΄ μ €μ¥
- `ENCRYPTION_KEY`λ” `.env`μ— κ³ μ • (μ λ€ λ³€κ²½ κΈμ§€)
- λ°μ΄ν„°λ² μ΄μ¤ νμΌ: `backend/database/coupang_cs.db`

---

## π― ν•µμ‹¬ μ¥μ 

### μ΄μ „ λ°©μ‹
β λ§¤λ² κ³„μ • μ •λ³΄ μ…λ ¥ ν•„μ”
β νμ΄μ§€ μƒλ΅κ³ μΉ¨ν•λ©΄ λ°μ΄ν„° μ΄κΈ°ν™”
β μ—¬λ¬ κ³„μ • κ΄€λ¦¬ μ–΄λ ¤μ›€

### μƒλ΅μ΄ λ°©μ‹ (ν„μ¬)
β… **ν• λ² λ“±λ΅ν•λ©΄ μκµ¬ μ €μ¥**
β… **νμ΄μ§€ λ΅λ“ μ‹ μλ™μΌλ΅ λ¶λ¬μ¤κΈ°**
β… **μ—¬λ¬ κ³„μ • μ„ΈνΈ κ΄€λ¦¬ κ°€λ¥**
β… **λ“λ΅­λ‹¤μ΄μΌλ΅ μ›ν΄λ¦­ μ „ν™**
β… **μΏ ν΅ + λ„¤μ΄λ²„ ν†µν•© κ΄€λ¦¬**

---

## π€ λ‹¤μ λ‹¨κ³„

1. **ν…μ¤νΈ**:
   ```bash
   # λ°±μ—”λ“ μ„λ²„ μ‹μ‘
   start_servers.bat

   # ν”„λ΅ νΈμ—”λ“ μ ‘μ†
   http://localhost:3000
   ```

2. **κ³„μ • μ„ΈνΈ λ“±λ΅**:
   - λ°ν’ κ΄€λ¦¬ β†’ κ³„μ • μ„¤μ •
   - μ„ΈνΈ μ΄λ¦„ μ…λ ¥ + μΏ ν΅/λ„¤μ΄λ²„ κ³„μ • μ…λ ¥
   - μ €μ¥ν•κ³  κ³„μ†

3. **μλ™ λ΅λ“ ν™•μΈ**:
   - νμ΄μ§€ μƒλ΅κ³ μΉ¨ (F5)
   - κ³„μ • μ„¤μ • μ—΄κΈ°
   - λ¨λ“  ν•„λ“κ°€ μλ™μΌλ΅ μ±„μ›μ Έ μλ”μ§€ ν™•μΈ β…

4. **μ‹¤μ  μ‚¬μ©**:
   - "μΏ ν΅μ—μ„ μ΅°ν" ν΄λ¦­ β†’ λ°”λ΅ λ™μ‘
   - "λ„¤μ΄λ²„ μλ™μ²λ¦¬" ν΄λ¦­ β†’ λ°”λ΅ λ™μ‘

---

## π‰ μ™„λ£!

μ΄μ  κ³„μ •μ„ ν• λ²λ§ λ“±λ΅ν•λ©΄:
- β… λ‹¤μμ— μλ™μΌλ΅ λ¶λ¬μ™€μ§
- β… μ–΄λ μ»΄ν“¨ν„°μ—μ„λ“  μ ‘μ† κ°€λ¥
- β… λ°μ΄ν„° μ λ€ λ‚ μ•„κ°€μ§€ μ•μ
- β… μΏ ν΅ + λ„¤μ΄λ²„ ν†µμ§Έλ΅ κ΄€λ¦¬

**λ” μ΄μƒ λ§¤λ² μ…λ ¥ν•  ν•„μ” μ—†μ!**
